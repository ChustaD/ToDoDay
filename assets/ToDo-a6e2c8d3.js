import{_ as p,o as u,c,w as k,v as m,a as s,t as d,F as _,r as g,b,d as v,e as N,f as w,g as f,h as P}from"./index-2c320c37.js";const S={class:"task"},$={__name:"ToDoTask",props:{task:{type:Object,required:!0}},emits:["deleteTask"],setup(n,{emit:o}){function l(a){o("deleteTask",a)}return(a,t)=>(u(),c("div",S,[k(s("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>n.task.time=i),type:"time"},null,512),[[m,n.task.time]]),k(s("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>n.task.value=i),type:"text"},null,512),[[m,n.task.value]]),s("button",{onClick:t[2]||(t[2]=i=>l(n.task))},"x")]))}},O=p($,[["__scopeId","data-v-9be22f3b"]]);const U={class:"day"},q={__name:"ToDoDay",props:{day:{type:Object,required:!0}},setup(n){function o(l){l.value.push({time:"",value:""})}return(l,a)=>(u(),c("div",U,[s("header",null,"Day: "+d(n.day.order),1),s("main",null,[s("div",null,[(u(!0),c(_,null,g(n.day.value,t=>(u(),b(O,{key:t.value.time,task:t,class:"task",onDeleteTask:a[0]||(a[0]=i=>l.$emit("deleteTask",i))},null,8,["task"]))),128))])]),s("footer",null,[s("button",{class:"button__set-task",onClick:a[1]||(a[1]=t=>o(n.day))},"+")])]))}},z=p(q,[["__scopeId","data-v-caa8ed9e"]]),B={__name:"ToDoDays",props:{days:{type:Object,required:!0}},setup(n){return(o,l)=>(u(),c("div",null,[(u(!0),c(_,null,g(n.days,a=>(u(),b(z,{key:a.order,day:a,class:"day",onDeleteTask:l[0]||(l[0]=t=>o.$emit("deleteTask",t))},null,8,["day"]))),128))]))}};const C=s("br",null,null,-1),I=s("br",null,null,-1),M=s("br",null,null,-1),V=s("br",null,null,-1),J={__name:"ToDo",setup(n){const o=v([{order:1,value:[{time:"06:00",value:"Делать"}]}]);N(()=>o.value,e=>{console.log(e),localStorage.setItem("days",JSON.stringify(e))},{deep:!0}),w(()=>{console.log("the component is now mounted."),localStorage.getItem("days")&&(o.value=JSON.parse(localStorage.getItem("days")))});function l(e){e.value.push({time:"",value:""})}function a(e){o.value[0].value=o.value[0].value.filter(r=>r.time!==e.time)}const t=v(!1);"serviceWorker"in navigator||(t.value=!0);const i=v(!1);"PushManager"in window||(i.value=!0);function T(){return new Promise(function(e,r){const y=Notification.requestPermission(function(x){e(x)});y&&y.then(e,r)}).then(function(e){if(e!=="granted")throw new Error("Permission not granted.")})}function h(){navigator.serviceWorker.ready.then(e=>{const r={userVisibleOnly:!0,applicationServerKey:"BMahIJH-CVUnzzZJQNS9cep6xvulTWkaooUU9I1opx2zhnQA2aYnpn0NRZUJkvifMvX4vyjDRRH10Cp92PfwAAE"};return console.log(e),e.pushManager.subscribe(r)}).then(function(e){return console.log("PushSubscription: ",JSON.stringify(e)),e})}console.log("self",self),console.log("self.addEventListener",self.addEventListener),console.log("self.registration",self.registration),self.addEventListener("push",function(e){e.data?(console.log("event:",e),console.log("This push event has data: ",e.data.text())):console.log("This push event has no data.")});function D(){Notification.requestPermission(e=>{e==="granted"&&navigator.serviceWorker.ready.then(r=>{r.showNotification("Vibration Sample",{body:"Buzz! Buzz!",vibrate:[200,100,200,100,200,100,200],tag:"vibration-sample"})})})}return(e,r)=>(u(),c(_,null,[f(d(t.value?"Браузер не поддерживает сервис-воркеры.":"Браузер поддерживает сервис-воркеры.")+" ",1),C,f(" "+d(i.value?"Браузер не поддерживает push-уведомления.":"Браузер поддерживает push-уведомления.")+" ",1),I,s("button",{onClick:T},"requestPermission"),s("button",{onClick:h},"subscribeUserToPush"),s("button",{onClick:D},"showNotification"),M,f(" "+d(o.value)+" ",1),V,P(B,{days:o.value,onSetTask:l,onDeleteTask:a},null,8,["days"])],64))}};export{J as default};
