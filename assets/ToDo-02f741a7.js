import{_ as p,o as r,c as i,w as y,v as f,a as t,t as c,F as m,r as T,b,d as _,e as x,f as P,g as v,h as $}from"./index-2afc8343.js";const w={class:"task"},S={__name:"ToDoTask",props:{task:{type:Object,required:!0}},emits:["deleteTask"],setup(s,{emit:a}){function l(n){a("deleteTask",n)}return(n,e)=>(r(),i("div",w,[y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>s.task.time=u),type:"time"},null,512),[[f,s.task.time]]),y(t("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>s.task.value=u),type:"text"},null,512),[[f,s.task.value]]),t("button",{onClick:e[2]||(e[2]=u=>l(s.task))},"x")]))}},q=p(S,[["__scopeId","data-v-9be22f3b"]]);const N={class:"day"},I={__name:"ToDoDay",props:{day:{type:Object,required:!0}},setup(s){function a(l){l.value.push({time:"",value:""})}return(l,n)=>(r(),i("div",N,[t("header",null,"Day: "+c(s.day.order),1),t("main",null,[t("div",null,[(r(!0),i(m,null,T(s.day.value,e=>(r(),b(q,{key:e.value.time,task:e,class:"task",onDeleteTask:n[0]||(n[0]=u=>l.$emit("deleteTask",u))},null,8,["task"]))),128))])]),t("footer",null,[t("button",{class:"button__set-task",onClick:n[1]||(n[1]=e=>a(s.day))},"+")])]))}},O=p(I,[["__scopeId","data-v-caa8ed9e"]]),V={__name:"ToDoDays",props:{days:{type:Object,required:!0}},setup(s){return(a,l)=>(r(),i("div",null,[(r(!0),i(m,null,T(s.days,n=>(r(),b(O,{key:n.order,day:n,class:"day",onDeleteTask:l[0]||(l[0]=e=>a.$emit("deleteTask",e))},null,8,["day"]))),128))]))}};const B=t("br",null,null,-1),C=t("br",null,null,-1),M=t("br",null,null,-1),U=t("br",null,null,-1),W={__name:"ToDo",setup(s){const a=_([{order:1,value:[{time:"06:00",value:"Делать"}]}]);x(()=>a.value,(o,d)=>{console.log(o),localStorage.setItem("days",JSON.stringify(o))},{deep:!0}),P(()=>{console.log("the component is now mounted."),localStorage.getItem("days")&&(a.value=JSON.parse(localStorage.getItem("days")))});function l(o){o.value.push({time:"",value:""})}function n(o){a.value[0].value=a.value[0].value.filter(d=>d.time!==o.time)}const e=_(!1);"serviceWorker"in navigator||(e.value=!0);const u=_(!1);"PushManager"in window||(u.value=!0);function g(){return new Promise(function(o,d){const k=Notification.requestPermission(function(h){o(h)});k&&k.then(o,d)}).then(function(o){if(o!=="granted")throw new Error("Permission not granted.")})}function D(){console.log(navigator.serviceWorker.ready)}return(o,d)=>(r(),i(m,null,[v(c(e.value?"Браузер не поддерживает сервис-воркеры.":"Браузер поддерживает сервис-воркеры.")+" ",1),B,v(" "+c(u.value?"Браузер не поддерживает push-уведомления.":"Браузер поддерживает push-уведомления.")+" ",1),C,t("button",{onClick:g},"requestPermission"),t("button",{onClick:D},"subscribeUserToPush"),M,v(" "+c(a.value)+" ",1),U,$(V,{days:a.value,onSetTask:l,onDeleteTask:n},null,8,["days"])],64))}};export{W as default};
